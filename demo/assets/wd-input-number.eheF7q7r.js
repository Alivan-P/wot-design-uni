var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,o=(t,e)=>{for(var n in e||(e={}))u.call(e,n)&&i(t,n,e[n]);if(a)for(var n of a(e))s.call(e,n)&&i(t,n,e[n]);return t},l=(t,a)=>e(t,n(a));import{a7 as r,d as c,r as d,c as p,C as b,B as m,b as f,g as h,w as v,h as w,z as g,i as _,K as y,q as N,al as I,E as M,ar as P,aB as j}from"./index-Ce5NZLOi.js";import{c as x,a as O,d as S,m as B,e as W,b as C,n as T,w as V,_ as E}from"./base64.Dvv4YswT.js";var F=(t=>(t.Input="input",t.Blur="blur",t.Watch="watch",t.Button="button",t))(F||{});const k=l(o({},C),{modelValue:W(T),min:B(1),max:B(Number.MAX_SAFE_INTEGER),step:B(1),stepStrictly:x(!1),precision:S(0),disabled:x(!1),disableInput:x(!1),disableMinus:x(!1),disablePlus:x(!1),withoutInput:x(!1),inputWidth:S(36),allowNull:x(!1),placeholder:O(""),adjustPosition:x(!0),beforeChange:Function,longPress:x(!1)});function $(){}const A=E(c(l(o({},{name:"wd-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:k,emits:["focus","blur","change","update:modelValue"],setup(t,{emit:e}){const n=t,a=e,u=d(function(){const t=q(n.modelValue);l(t,n.modelValue)||a("update:modelValue",t);return t}());let s=null;const i=p((()=>{const t=q(u.value),{disabled:e,min:a,step:s}=n;return e||Number(t)<=a||S(t,-s)<a})),o=p((()=>{const t=q(u.value),{disabled:e,max:a,step:s}=n;return e||Number(t)>=a||S(t,s)>a}));function l(t,e){return P(String(t),String(e))}function c(t){const e=Number(n.precision);return Number(parseFloat(""+Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toFixed(e))}function x(t){if(!m(t))return 0;const e=t.toString(),n=e.indexOf(".");let a=0;return-1!==n&&(a=e.length-n-1),a}function O(t,e=F.Input){const s=e!==F.Watch,i=e===F.Blur||e===F.Button;if((e===F.Input||e===F.Watch)&&String(t).endsWith(".")&&n.precision)return u.value=t,void j((()=>{u.value=function(t){if(Number(n.precision)>0){const e=t.indexOf(".");return-1===e?t:t.substring(0,e+1)+t.substring(e+1).replace(/\./g,"")}{const e=t.indexOf(".");return-1!==e?t.substring(0,e):t}}(String(t)),a("update:modelValue",u.value),a("change",{value:u.value})}));if(!i&&l(t,u.value))return;const o=()=>function(t){u.value=t;const e=q(t);j((()=>{u.value=e,a("update:modelValue",u.value),a("change",{value:u.value})}))}(t);s?function(t,{args:e=[],done:n,canceled:a,error:u}){if(t){const s=t.apply(null,e);r(s)?s.then((t=>{t?n():a&&a()})).catch(u||$):s?n():a&&a()}else n()}(n.beforeChange,{args:[t],done:o}):o()}function S(t,e){if(t=Number(t),isNaN(t))return n.min;const a=Math.max(x(t),x(e)),u=Math.pow(10,a);return c((t*u+e*u)/u)}function B(t){!function(t){if(t<0&&(i.value||n.disableMinus)||t>0&&(o.value||n.disablePlus))return;O(S(u.value,t),F.Button)}("add"===t?n.step:-n.step)}function W(t){O(t.detail.value||"",F.Input)}function C(t){const e=t.detail.value||"";O(e,F.Blur),a("blur",{value:e})}function T(t){A(),s=setTimeout((()=>{B(t),T(t)}),250)}function E(t){n.longPress&&(A(),s=setTimeout((()=>{B(t),T(t)}),600))}function k(){n.longPress&&A()}function A(){s&&(clearTimeout(s),s=null)}function G(t){a("focus",t.detail)}function q(t){if(n.allowNull&&(!m(t)||""===t))return"";let e=Number(t);return isNaN(e)&&(e=n.min),n.stepStrictly&&(e=function(t){const e=x(n.step),a=Math.pow(10,e);return Math.round(Number(t)/n.step)*a*n.step/a}(t)),e=Math.min(Math.max(e,n.min),n.max),m(n.precision)&&(e=c(e)),e}return b((()=>n.modelValue),(t=>{O(t,F.Watch)})),b([()=>n.max,()=>n.min,()=>n.precision],(()=>{O(q(u.value),F.Watch)})),(t,e)=>{const n=_,a=I;return h(),f(n,{class:N(`wd-input-number ${t.customClass} ${t.disabled?"is-disabled":""} ${t.withoutInput?"is-without-input":""}`),style:M(t.customStyle)},{default:v((()=>[w(n,{class:N("wd-input-number__action "+(i.value||t.disableMinus?"is-disabled":"")),onClick:e[0]||(e[0]=t=>B("sub")),onTouchstart:e[1]||(e[1]=t=>E("sub")),onTouchend:y(k,["stop"])},{default:v((()=>[w(V,{name:"decrease","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"]),t.withoutInput?g("",!0):(h(),f(n,{key:0,class:"wd-input-number__inner",onClick:e[2]||(e[2]=y((()=>{}),["stop"]))},{default:v((()=>[w(a,{class:"wd-input-number__input",style:M(""+(t.inputWidth?"width: "+t.inputWidth:"")),type:"digit",disabled:t.disabled||t.disableInput,value:String(u.value),placeholder:t.placeholder,"adjust-position":t.adjustPosition,onInput:W,onFocus:G,onBlur:C},null,8,["style","disabled","value","placeholder","adjust-position"]),w(n,{class:"wd-input-number__input-border"})])),_:1})),w(n,{class:N("wd-input-number__action "+(o.value||t.disablePlus?"is-disabled":"")),onClick:e[3]||(e[3]=t=>B("add")),onTouchstart:e[4]||(e[4]=t=>E("add")),onTouchend:y(k,["stop"])},{default:v((()=>[w(V,{name:"add","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-de14ecb4"]]);export{A as _};
