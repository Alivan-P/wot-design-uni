var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,s=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&u(e,l,o[l]);if(a)for(var l of a(o))n.call(o,l)&&u(e,l,o[l]);return e},i=(e,a)=>o(e,l(a));import{u as d,_ as r}from"./wd-message-box.C60TMgBY.js";import{d as c,a2 as p,r as m,J as v,c as f,C as g,a5 as b,a9 as w,b as _,z as h,g as y,w as x,h as V,D as $,i as j,m as k,F as C,n as z,q as K,k as S,j as O,t as T,E as I,ac as P,B as U,X as N,Y as q,L as E,e as F,f as B,l as M,K as Q,u as A}from"./index-Ce5NZLOi.js";import{u as H,a as L,c as X,_ as Y}from"./wd-loading.BQj98K7a.js";import{b as D,m as G,c as J,a as R,f as W,w as Z,_ as ee}from"./base64.Dvv4YswT.js";import{p as oe,r as le,c as ae}from"./clickoutside.CJmLG0WC.js";import{q as te,_ as ne}from"./page-wraper.Dd2rHYWB.js";import{u as ue}from"./useChildren.CNI3u0P7.js";import{_ as se}from"./demo-block.aAA3UVGE.js";import{_ as ie}from"./wd-slider.DAzfyvna.js";import{_ as de}from"./wd-button.zsAEdnVg.js";import{w as re}from"./wd-sort-button.Cp6KIrDJ.js";import"./wd-input.CiMTh9O_.js";import"./useTranslate.nEp_lkyA.js";import"./useTouch.Nhgdyfx0.js";const ce=Symbol("wd-drop-menu"),pe=i(s({},D),{zIndex:G(12),direction:R("down"),modal:J(!0),closeOnClickModal:J(!0),duration:G(200)}),me=i(s({},D),{customTitle:R(""),customIcon:R(""),modelValue:[String,Number],options:W(),disabled:J(!1),iconName:R("check"),title:String,icon:R("arrow-down"),iconSize:R("14px"),beforeToggle:Function,valueKey:R("value"),labelKey:R("label"),tipKey:R("tip"),customPopupClass:R(""),customPopupStyle:R("")}),ve=ee(c(i(s({},{name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:me,emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:o,emit:l}){const a=e,t=l,n=p(te,null),u=m(!1),s=m(!1),i=m(),d=m(12),r=m(!0),c=m(0),{parent:N}=H(ce),{proxy:q}=v(),E=f((()=>{let e="";return e=u.value&&N?"down"===N.props.direction?`top: calc(var(--window-top) + ${N.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${N.offset.value}px)`:"",e}));function F(){s.value&&(P(a.beforeToggle)?a.beforeToggle({status:!1,resolve:e=>{e&&B()}}):B())}function B(){s.value&&(s.value=!1)}function M(){s.value||(P(a.beforeToggle)?a.beforeToggle({status:!0,resolve:e=>{e&&Q()}}):Q())}function Q(){u.value=!0,s.value=!0,N&&(r.value=Boolean(N.props.modal),c.value=Number(N.props.duration),i.value="down"===N.props.direction?"top":"bottom")}function A(){u.value=!1,t("closed")}function X(){t("open")}function Y(){t("opened")}function D(){t("close")}return g((()=>a.modelValue),(e=>{U(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),b((()=>{n&&n.pushToQueue?n.pushToQueue(q):oe(q)})),w((()=>{n&&n.removeFromQueue?n.removeFromQueue(q):le(q)})),o({getShowPop:function(){return s.value},open:M,close:F,toggle:function(){s.value?F():M()}}),(e,o)=>{const l=S,n=j;return u.value?(y(),_(n,{key:0,class:K(`wd-drop-item  ${e.customClass}`),style:I(`pointer-events: none; z-index: ${d.value}; ${E.value};${e.customStyle}`)},{default:x((()=>[V(L,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),"z-index":d.value,duration:c.value,position:i.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,onBeforeEnter:X,onAfterEnter:Y,onBeforeLeave:D,onAfterLeave:A},{default:x((()=>[e.options.length?(y(),_(n,{key:0},{default:x((()=>[(y(!0),k(C,null,z(e.options,((o,u)=>(y(),_(n,{key:u,onClick:e=>function(e){if(a.disabled)return;const{valueKey:o}=a,l=a.options[e],n=void 0!==l[o]?l[o]:l;t("update:modelValue",n),t("change",{value:n,selectedItem:l}),F()}(u),class:K("wd-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:x((()=>[V(n,{class:K(`wd-drop-item__title ${e.customTitle}`)},{default:x((()=>[V(l,null,{default:x((()=>[O(T(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(y(),_(l,{key:0,class:"wd-drop-item__tip"},{default:x((()=>[O(T(o[e.tipKey]),1)])),_:2},1024)):h("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(y(),_(Z,{key:0,name:e.iconName,size:"20px",class:K(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):h("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):$(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class"])])),_:3},8,["class","style"])):h("",!0)}}})),[["__scopeId","data-v-38e6eeba"]]),fe=ee(c(i(s({},{name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:pe,setup(e){const o=e,l=p(te,null),a=m(`dropMenuId${N()}`),t=m(0),n=m(0),u=f((()=>"down"===o.direction?`top: calc(var(--window-top) + ${t.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${t.value}px)`)),{proxy:s}=v(),{linkChildren:i,children:d}=ue(ce),r=f((()=>d.some((e=>e.$.exposed.getShowPop())))),c=m(!1);let w;function h(){}function S(e){const{title:o,modelValue:l,options:a,valueKey:t,labelKey:n}=e;if(o)return o;for(let u=0,s=a.length;u<s;u++)if(l===a[u][t])return a[u][n];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function P(e){E(`#${a.value}`,!1,s).then((l=>{if(!l)return;const{top:a,bottom:u}=l;"down"===o.direction?t.value=Number(u):t.value=n.value-Number(a),e.$.exposed.toggle()}))}function U(){o.closeOnClickModal&&d.forEach((e=>{e.$.exposed.close()}))}return g(r,(e=>{w&&clearTimeout(w),e?c.value=!0:w=setTimeout((()=>{c.value=!1,w=null}),16)})),i({props:o,fold:P,offset:t}),g((()=>o.direction),(e=>{["up","down"].includes(e)||console.error("[wot ui] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),b((()=>{n.value=q().windowHeight})),(e,o)=>{const t=j,n=F(B("wd-icon"),Z);return y(),_(t,{style:I(e.customStyle),class:K(`wd-drop-menu ${e.customClass}`),onClick:Q(h,["stop","prevent"]),id:a.value},{default:x((()=>[V(X,{show:c.value,duration:e.duration,"z-index":12,"custom-style":u.value,onClick:U,onTouchmove:h},null,8,["show","duration","custom-style"]),V(t,{class:"wd-drop-menu__list"},{default:x((()=>[(y(!0),k(C,null,z(M(d),((e,o)=>(y(),_(t,{key:o,onClick:o=>function(e){e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):ae(e),P(e))}(e),class:K(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:x((()=>[V(t,{class:"wd-drop-menu__item-title"},{default:x((()=>[V(t,{class:"wd-drop-menu__item-title-text"},{default:x((()=>[O(T(S(e)),1)])),_:2},1024),V(n,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),$(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}})),[["__scopeId","data-v-e2eac34a"]]),ge=ee(c({__name:"Index",setup(e){const{t:o}=A(),l=d(),a=m(),t=m(),n=m(30),u=m(1),s=m(0),i=m(0),c=m(0),p=m(0),v=m(0),f=m(0),g=m(0),b=m(0),w=m(0),h=m([{label:o("quan-bu-shang-pin"),value:0},{label:o("xin-kuan-shang-pin"),value:1,tip:o("zhe-shi-bu-chong-xin-xi")},{label:o("zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian-zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian"),value:2}]),$=m([{label:o("zong-he"),value:0},{label:o("xiao-liang"),value:1},{label:o("shang-jia-shi-jian"),value:2}]);function k(){var e;null==(e=t.value)||e.initSlider()}function C({value:e}){console.log(e)}function z({value:e}){console.log(e)}function K({value:e}){console.log(e)}function S({value:e}){console.log(e)}function I({value:e}){console.log(e)}function P({value:e}){console.log(e)}function U({value:e}){console.log(e)}function N({value:e}){console.log(e)}function q({value:e}){console.log(e)}function E(){a.value.close()}const M=({status:e,resolve:a})=>{l.confirm({title:`${o(e?"yi-bu-da-kai":"yi-bu-guan-bi")}`,msg:`${o(e?"que-ding-yao-da-kai-xia-la-cai-dan-ma":"que-ding-yao-guan-bi-xia-la-cai-dan-ma")}`}).then((()=>{a(!0)})).catch((()=>{a(!1)}))};return(e,o)=>{const l=F(B("wd-message-box"),r),d=j,m=F(B("wd-drop-menu-item"),ve),A=F(B("wd-drop-menu"),fe),H=F(B("demo-block"),se),L=F(B("wd-slider"),ie),X=F(B("wd-cell"),Y),D=F(B("wd-button"),de),G=F(B("wd-sort-button"),re),J=F(B("page-wraper"),ne);return y(),_(J,null,{default:x((()=>[V(d,{onClick:o[0]||(o[0]=Q((()=>{}),["stop"]))},{default:x((()=>[V(l)])),_:1}),V(d,{class:"demo-body"},{default:x((()=>[V(H,{title:e.$t("jiBenYongFa"),transparent:""},{default:x((()=>[V(A,null,{default:x((()=>[V(m,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),options:h.value,onChange:C},null,8,["modelValue","options"]),V(m,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value=e),options:$.value,onChange:z},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("zi-ding-yi-cai-dan-nei-rong"),transparent:""},{default:x((()=>[V(A,null,{default:x((()=>[V(m,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),options:h.value,onChange:K},null,8,["modelValue","options"]),V(m,{ref_key:"dropMenu",ref:a,title:e.$t("shai-xuan"),onOpened:k},{default:x((()=>[V(d,null,{default:x((()=>[V(L,{modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value=e),ref_key:"slider",ref:t},null,8,["modelValue"]),V(X,{title:e.$t("biao-ti-wen-zi-10"),value:"内容"},null,8,["title"]),V(X,{title:e.$t("biao-ti-wen-zi-10"),label:"$t('miaoShuXinXi-0')",value:"内容"},null,8,["title"]),V(d,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:x((()=>[V(D,{block:"",size:"large",onClick:E},{default:x((()=>[O(T(e.$t("zhu-yao-an-niu")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("zi-ding-yi-cai-dan-xuan-xiang"),transparent:""},{default:x((()=>[V(d,{class:"custom-menu"},{default:x((()=>[V(A,{"custom-style":"flex: 1; min-width: 0"},{default:x((()=>[V(m,{modelValue:c.value,"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e),options:h.value,onChange:S},null,8,["modelValue","options"])])),_:1}),V(d,{style:{flex:"1"}},{default:x((()=>[V(G,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),title:e.$t("shang-jia-shi-jian"),onChange:I},null,8,["modelValue","title"])])),_:1})])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("zi-ding-yi-cai-dan-tu-biao"),transparent:""},{default:x((()=>[V(A,null,{default:x((()=>[V(m,{title:e.$t("di-tu"),icon:"location","icon-size":"24px"},null,8,["title"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("yi-bu-da-kai-guan-bi"),transparent:""},{default:x((()=>[V(A,null,{default:x((()=>[V(m,{modelValue:w.value,"onUpdate:modelValue":o[7]||(o[7]=e=>w.value=e),options:h.value,onChange:C,"before-toggle":M},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("xiang-shang-dan-chu"),transparent:""},{default:x((()=>[V(A,{direction:"up"},{default:x((()=>[V(m,{modelValue:v.value,"onUpdate:modelValue":o[8]||(o[8]=e=>v.value=e),options:h.value,onChange:P},null,8,["modelValue","options"]),V(m,{modelValue:f.value,"onUpdate:modelValue":o[9]||(o[9]=e=>f.value=e),options:$.value,onChange:U},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("jinYong"),transparent:""},{default:x((()=>[V(A,{direction:"up"},{default:x((()=>[V(m,{modelValue:g.value,"onUpdate:modelValue":o[10]||(o[10]=e=>g.value=e),disabled:"",options:h.value,onChange:N},null,8,["modelValue","options"]),V(m,{modelValue:b.value,"onUpdate:modelValue":o[11]||(o[11]=e=>b.value=e),options:$.value,onChange:q},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-88c1dc11"]]);export{ge as default};
